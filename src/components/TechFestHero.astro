---
import HeaderInfo from "./HeaderInfo.astro";
import TerminalBlock from "./TerminalBlock.astro";
import CTA from "./CTA.astro";
import Footer from "./Footer.astro";
import { fade } from "astro:transitions";

const { event } = Astro.props;
---

<div transition:animate={fade()} class="w-full max-w-2xl mx-auto">
  <div class="bg-surface">
    <div class="p-6 md:p-10">
      <HeaderInfo meta={event.meta} status={event.status} />

      <header class="text-center mb-8">
        <h1 class="text-4xl md:text-6xl font-bold text-primary">
          {event.meta.title}
        </h1>
        <p
          class="text-xl md:text-2xl font-bold tracking-widest mt-3 text-primary"
          data-i18n-key="hero.newRelease"
        >
          NEW RELEASE
        </p>
        <!-- Fechas principales del evento: Bootcamp y Hackathon (ubicadas debajo de NEW RELEASE y más vistosas) -->
        <p class="mt-6 text-center">
          {
            (() => {
              const boot = event.schedule?.find((s: any) => /bootcamp/i.test(s.event))?.date ||
                (event.bootcamp?.details?.[0] || '').replace(/^Fecha:\s*/i, '');
              const hack = event.schedule?.find((s: any) => /hackathon/i.test(s.event))?.date ||
                (event.hackathon?.details?.[0] || '').replace(/^Fecha:\s*/i, '');
              if (boot && hack) {
                return (
                  <span class="inline-block bg-accent/10 text-accent px-4 py-2 rounded-lg font-semibold text-lg md:text-xlc">
                    Bootcamp: {boot} &middot; Hackathon: {hack}
                  </span>
                );
              }
              return boot || hack || null;
            })()
          }
        </p>
      </header>

      <div class="mb-0 space-y-4">
        <div>
          <p class="comment text-sm mb-1" data-i18n-key="hero.bootcampComment">// Más información del bootcamp</p>
          <p>
            <a 
              href="/bootcamp" 
              class="command-link" 
              data-i18n-key="hero.runBootcamp"
            >
              &gt; INICIAR /bootcamp()
            </a>
          </p>
        </div>
        <div>
          <p class="comment text-sm mb-1" data-i18n-key="hero.hackathonComment">// Conoce los detalles de la hackathon</p>
          <p>
            <a 
              href="/hackathon" 
              class="command-link" 
              data-i18n-key="hero.runHackathon"
            >
              &gt; INICIAR /hackathon()
            </a>
          </p>
        </div>
      </div>

      <main>
        <TerminalBlock event={event} />
      </main>

      <CTA cta={event.cta} />

      <Footer meta={event.meta} />
    </div>
  </div>
</div>
