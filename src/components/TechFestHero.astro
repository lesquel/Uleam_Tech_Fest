---
import HeaderInfo from "./HeaderInfo.astro";
import TerminalBlock from "./TerminalBlock.astro";
import Footer from "./Footer.astro";
import { fade } from "astro:transitions";

const { event } = Astro.props;
---

<div transition:animate={fade()} class="w-full max-w-2xl mx-auto">
  <div class="bg-surface">
    <div class="p-6 md:p-10">
      <HeaderInfo meta={event.meta} status={event.status} />

      <header class="text-center mb-8">
        <h1 class="text-4xl md:text-6xl font-bold text-primary">
          {event.meta.title}
        </h1>
        <p
          class="text-xl md:text-2xl font-bold tracking-widest mt-3 text-primary"
          data-i18n-key="hero.newRelease"
        >
          NEW RELEASE
        </p>
        <!-- Fechas principales del evento: Bootcamp y Hackathon (ubicadas debajo de NEW RELEASE y más vistosas) -->
        <p class="mt-6 text-center">
          {
            (() => {
              const boot =
                event.schedule?.find((s: any) => /bootcamp/i.test(s.event))
                  ?.date ||
                (event.bootcamp?.details?.[0] || "").replace(/^Fecha:\s*/i, "");
              const hack =
                event.schedule?.find((s: any) => /hackathon/i.test(s.event))
                  ?.date ||
                (event.hackathon?.details?.[0] || "").replace(
                  /^Fecha:\s*/i,
                  ""
                );
              const posters =
                event.schedule?.find((s: any) => /p[oó]ster/i.test(s.event))
                  ?.date ||
                (event.posters?.dates || "").replace(/^Fecha:\s*/i, "");

              const segments = [
                boot ? `Bootcamp: ${boot}` : null,
                hack ? `Hackathon: ${hack}` : null,
                posters ? `Pósteres: ${posters}` : null,
              ].filter(Boolean);

              if (segments.length === 0) {
                return null;
              }

              return (
                <span class="inline-block bg-accent/10 text-accent px-4 py-2 rounded-lg font-semibold text-lg md:text-xlc">
                  {segments.join(" | ")}
                </span>
              );
            })()
          }
        </p>
      </header>

      <div class="mb-0 space-y-4">
        <div>
          <p class="comment text-sm mb-1" data-i18n-key="hero.bootcampComment">
            // Más información del bootcamp
          </p>
          <p>
            <a
              href="/bootcamp"
              class="command-link"
              data-i18n-key="hero.runBootcamp"
            >
              &gt; INICIAR /bootcamp()
            </a>
          </p>
        </div>
        <div>
          <p class="comment text-sm mb-1" data-i18n-key="hero.hackathonComment">
            // Conoce los detalles de la hackathon
          </p>
          <p>
            <a
              href="/hackathon"
              class="command-link"
              data-i18n-key="hero.runHackathon"
            >
              &gt; INICIAR /hackathon()
            </a>
          </p>
        </div>
        <div>
          <p class="comment text-sm mb-1" data-i18n-key="hero.postersComment">
            // Explora la convocatoria de pósteres científicos
          </p>
          <p>
            <a
              href="/posters"
              class="command-link"
              data-i18n-key="hero.runPosters"
            >
              &gt; INICIAR /posters()
            </a>
          </p>
        </div>
      </div>

      <main>
        <TerminalBlock event={event} />
      </main>

      <Footer meta={event.meta} />
    </div>
  </div>
</div>
